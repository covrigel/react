<!DOCTYPE html>
<html>
<head>
  <title>Index 2</title>
  <script type="text/javascript" src="https://fb.me/react-0.13.3.js"></script>
  <script type="text/javascript" src="https://fb.me/JSXTransformer-0.13.3.js"></script>
</head>
<body>
<script type="text/jsx">
  var Box = React.createClass({

    getDefaultProps: function(){
      return {
        colorIndex: -1
      }
    },

    getInitialState: function(){
      return{
        backgroundColor: "blue",
        height: 200,
        width: 200
      }
    },

    update: function(){
      this.setProps({colorIndex: this.props.colorIndex + 1});
    },

    componentWillReceiveProps: function(nextProps){
      var color = this.props.colors.split(",")[nextProps.colorIndex];
      if(!colors){this.setProps({colorIndex: 0})}
      this.setState({backgroundColor: color});
    },

    render: function(){
      return <div style={this.state}></div>;
    }
  });

  React.render(<Box colors="Red,DarkMagenta,Salmon,Chartreuse" onClick={this.update} />, document.body);

</script>
</body>
</html>